<div class="resenas-container">
  <div class="resenas-card">
    <h2 class="titulo">â­ Opiniones del producto</h2>

    <!-- Lista de reseÃ±as -->
    <div *ngIf="resenas && resenas.length > 0; else sinResenas">
      <div *ngFor="let r of resenas" class="resena-item">
        <div class="resena-header">
          <div class="avatar">{{ obtenerIniciales(r.nombreCliente) }}</div>
          <strong>{{ r.nombreCliente }}</strong>
          <span class="fecha">{{ r.fecha | date:'shortDate' }}</span>
          <span class="estrellas">
            <ng-container *ngFor="let n of [].constructor(r.calificacion)">
              â­
            </ng-container>
          </span>
        </div>
        <p class="comentario">{{ r.comentario }}</p>
      </div>
    </div>

    <ng-template #sinResenas>
      <p class="sin-resenas">AÃºn no hay reseÃ±as para este producto â˜•</p>
    </ng-template>

    <hr class="separador" />

    <!-- Formulario -->
    <h4 class="subtitulo">ğŸ“ Deja tu reseÃ±a</h4>

    <form (ngSubmit)="agregarResena()" class="formulario">
      <input
        [(ngModel)]="nombreCliente"
        name="nombreCliente"
        class="form-control"
        placeholder="Tu nombre"
        required
      />

      <textarea
        [(ngModel)]="comentario"
        name="comentario"
        class="form-control"
        placeholder="Escribe tu experiencia..."
        required
      ></textarea>

      <div class="rating">
        <span 
          *ngFor="let n of [1,2,3,4,5]" 
          (click)="seleccionarCalificacion(n)" 
          [class.active]="calificacion >= n">
          â­
        </span>
      </div>

      <button type="submit" class="btn-enviar">Enviar reseÃ±a</button>
    </form>
  </div>
</div>